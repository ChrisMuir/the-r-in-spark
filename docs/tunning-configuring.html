<!DOCTYPE html>
<html >

<head>

  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title>The R in Spark: Learning Apache Spark with R</title>
  <meta name="description" content="A book to learn Apache Spark with R using the sparklyr R package.">
  <meta name="generator" content="bookdown 0.7 and GitBook 2.6.7">

  <meta property="og:title" content="The R in Spark: Learning Apache Spark with R" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="A book to learn Apache Spark with R using the sparklyr R package." />
  <meta name="github-repo" content="javierluraschi/the-r-in-spark" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="The R in Spark: Learning Apache Spark with R" />
  
  <meta name="twitter:description" content="A book to learn Apache Spark with R using the sparklyr R package." />
  

<meta name="author" content="Javier Luraschi">


<meta name="date" content="2018-10-08">

  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">
  
  
<link rel="prev" href="overview-5.html">
<link rel="next" href="tunning-partitioning.html">
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />







<script src="libs/htmlwidgets-1.2/htmlwidgets.js"></script>
<script src="libs/r2d3-render-0.1.0/r2d3-render.js"></script>
<script src="libs/webcomponents-2.0.0/webcomponents.js"></script>
<script src="libs/r2d3-binding-0.2.2/r2d3.js"></script>
<script src="libs/d3v5-5.0.0/d3.min.js"></script>
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-119986300-1"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-119986300-1');
</script>


<style type="text/css">
a.sourceLine { display: inline-block; line-height: 1.25; }
a.sourceLine { pointer-events: none; color: inherit; text-decoration: inherit; }
a.sourceLine:empty { height: 1.2em; position: absolute; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
a.sourceLine { text-indent: -1em; padding-left: 1em; }
}
pre.numberSource a.sourceLine
  { position: relative; }
pre.numberSource a.sourceLine:empty
  { position: absolute; }
pre.numberSource a.sourceLine::before
  { content: attr(data-line-number);
    position: absolute; left: -5em; text-align: right; vertical-align: baseline;
    border: none; pointer-events: all;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  }
@media screen {
a.sourceLine::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><strong><a href="./">Learning Apache Spark with R</a></strong></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Preface</a><ul>
<li class="chapter" data-level="" data-path="why.html"><a href="why.html"><i class="fa fa-check"></i>Why</a></li>
<li class="chapter" data-level="" data-path="structure.html"><a href="structure.html"><i class="fa fa-check"></i>Structure</a></li>
<li class="chapter" data-level="" data-path="authors.html"><a href="authors.html"><i class="fa fa-check"></i>Authors</a></li>
<li class="chapter" data-level="" data-path="acknowledgments.html"><a href="acknowledgments.html"><i class="fa fa-check"></i>Acknowledgments</a></li>
</ul></li>
<li class="chapter" data-level="1" data-path="intro.html"><a href="intro.html"><i class="fa fa-check"></i><b>1</b> Introduction</a><ul>
<li class="chapter" data-level="1.1" data-path="intro-background.html"><a href="intro-background.html"><i class="fa fa-check"></i><b>1.1</b> Background</a></li>
<li class="chapter" data-level="1.2" data-path="spark.html"><a href="spark.html"><i class="fa fa-check"></i><b>1.2</b> Spark</a></li>
<li class="chapter" data-level="1.3" data-path="r.html"><a href="r.html"><i class="fa fa-check"></i><b>1.3</b> R</a></li>
<li class="chapter" data-level="1.4" data-path="sparklyr.html"><a href="sparklyr.html"><i class="fa fa-check"></i><b>1.4</b> sparklyr</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="starting.html"><a href="starting.html"><i class="fa fa-check"></i><b>2</b> Getting Started</a><ul>
<li class="chapter" data-level="2.1" data-path="prerequisites.html"><a href="prerequisites.html"><i class="fa fa-check"></i><b>2.1</b> Prerequisites</a><ul>
<li class="chapter" data-level="2.1.1" data-path="prerequisites.html"><a href="prerequisites.html#install-r"><i class="fa fa-check"></i><b>2.1.1</b> Install R</a></li>
<li class="chapter" data-level="2.1.2" data-path="prerequisites.html"><a href="prerequisites.html#install-java"><i class="fa fa-check"></i><b>2.1.2</b> Install Java</a></li>
<li class="chapter" data-level="2.1.3" data-path="prerequisites.html"><a href="prerequisites.html#install-rstudio"><i class="fa fa-check"></i><b>2.1.3</b> Install RStudio</a></li>
<li class="chapter" data-level="2.1.4" data-path="prerequisites.html"><a href="prerequisites.html#install-sparklyr"><i class="fa fa-check"></i><b>2.1.4</b> Install sparklyr</a></li>
</ul></li>
<li class="chapter" data-level="2.2" data-path="installing-spark.html"><a href="installing-spark.html"><i class="fa fa-check"></i><b>2.2</b> Installing Spark</a></li>
<li class="chapter" data-level="2.3" data-path="connecting-to-spark.html"><a href="connecting-to-spark.html"><i class="fa fa-check"></i><b>2.3</b> Connecting to Spark</a></li>
<li class="chapter" data-level="2.4" data-path="using-spark.html"><a href="using-spark.html"><i class="fa fa-check"></i><b>2.4</b> Using Spark</a><ul>
<li class="chapter" data-level="2.4.1" data-path="using-spark.html"><a href="using-spark.html#spark-web-interface"><i class="fa fa-check"></i><b>2.4.1</b> Web Interface</a></li>
<li class="chapter" data-level="2.4.2" data-path="using-spark.html"><a href="using-spark.html#logs"><i class="fa fa-check"></i><b>2.4.2</b> Logs</a></li>
<li class="chapter" data-level="2.4.3" data-path="using-spark.html"><a href="using-spark.html#using-spark-from-rstudio"><i class="fa fa-check"></i><b>2.4.3</b> RStudio</a></li>
</ul></li>
<li class="chapter" data-level="2.5" data-path="disconnecting.html"><a href="disconnecting.html"><i class="fa fa-check"></i><b>2.5</b> Disconnecting</a></li>
<li class="chapter" data-level="2.6" data-path="recap.html"><a href="recap.html"><i class="fa fa-check"></i><b>2.6</b> Recap</a></li>
</ul></li>
<li class="part"><span><b>I Analysis</b></span></li>
<li class="chapter" data-level="3" data-path="analysis.html"><a href="analysis.html"><i class="fa fa-check"></i><b>3</b> Analysis</a><ul>
<li class="chapter" data-level="3.1" data-path="overview.html"><a href="overview.html"><i class="fa fa-check"></i><b>3.1</b> Overview</a></li>
<li class="chapter" data-level="3.2" data-path="dplyr.html"><a href="dplyr.html"><i class="fa fa-check"></i><b>3.2</b> dplyr</a><ul>
<li class="chapter" data-level="3.2.1" data-path="dplyr.html"><a href="dplyr.html#pass-through-functions"><i class="fa fa-check"></i><b>3.2.1</b> Pass-through Functions</a></li>
<li class="chapter" data-level="3.2.2" data-path="dplyr.html"><a href="dplyr.html#dplyr-reosurces"><i class="fa fa-check"></i><b>3.2.2</b> Resources</a></li>
</ul></li>
<li class="chapter" data-level="3.3" data-path="dbi.html"><a href="dbi.html"><i class="fa fa-check"></i><b>3.3</b> DBI</a></li>
</ul></li>
<li class="part"><span><b>II Modeling</b></span></li>
<li class="chapter" data-level="4" data-path="modeling.html"><a href="modeling.html"><i class="fa fa-check"></i><b>4</b> Modeling</a><ul>
<li class="chapter" data-level="4.1" data-path="overview-1.html"><a href="overview-1.html"><i class="fa fa-check"></i><b>4.1</b> Overview</a></li>
<li class="chapter" data-level="4.2" data-path="supervised.html"><a href="supervised.html"><i class="fa fa-check"></i><b>4.2</b> Supervised</a></li>
<li class="chapter" data-level="4.3" data-path="unsupervised.html"><a href="unsupervised.html"><i class="fa fa-check"></i><b>4.3</b> Unsupervised</a><ul>
<li class="chapter" data-level="4.3.1" data-path="unsupervised.html"><a href="unsupervised.html#k-means-clustering"><i class="fa fa-check"></i><b>4.3.1</b> K-Means Clustering</a></li>
<li class="chapter" data-level="4.3.2" data-path="unsupervised.html"><a href="unsupervised.html#gaussian-mixture-clustering"><i class="fa fa-check"></i><b>4.3.2</b> Gaussian Mixture Clustering</a></li>
</ul></li>
<li class="chapter" data-level="4.4" data-path="broom.html"><a href="broom.html"><i class="fa fa-check"></i><b>4.4</b> Broom</a></li>
<li class="chapter" data-level="4.5" data-path="pipelines.html"><a href="pipelines.html"><i class="fa fa-check"></i><b>4.5</b> Pipelines</a></li>
</ul></li>
<li class="part"><span><b>III Scaling</b></span></li>
<li class="chapter" data-level="5" data-path="clusters.html"><a href="clusters.html"><i class="fa fa-check"></i><b>5</b> Clusters</a><ul>
<li class="chapter" data-level="5.1" data-path="overview-2.html"><a href="overview-2.html"><i class="fa fa-check"></i><b>5.1</b> Overview</a></li>
<li class="chapter" data-level="5.2" data-path="managers.html"><a href="managers.html"><i class="fa fa-check"></i><b>5.2</b> Managers</a><ul>
<li class="chapter" data-level="5.2.1" data-path="managers.html"><a href="managers.html#clusters-standalone"><i class="fa fa-check"></i><b>5.2.1</b> Standalone</a></li>
<li class="chapter" data-level="5.2.2" data-path="managers.html"><a href="managers.html#yarn"><i class="fa fa-check"></i><b>5.2.2</b> Yarn</a></li>
<li class="chapter" data-level="5.2.3" data-path="managers.html"><a href="managers.html#mesos"><i class="fa fa-check"></i><b>5.2.3</b> Mesos</a></li>
<li class="chapter" data-level="5.2.4" data-path="managers.html"><a href="managers.html#kubernetes"><i class="fa fa-check"></i><b>5.2.4</b> Kubernetes</a></li>
</ul></li>
<li class="chapter" data-level="5.3" data-path="on-premise.html"><a href="on-premise.html"><i class="fa fa-check"></i><b>5.3</b> On-Premise</a><ul>
<li class="chapter" data-level="5.3.1" data-path="on-premise.html"><a href="on-premise.html#cloudera"><i class="fa fa-check"></i><b>5.3.1</b> Cloudera</a></li>
<li class="chapter" data-level="5.3.2" data-path="on-premise.html"><a href="on-premise.html#hortonworks"><i class="fa fa-check"></i><b>5.3.2</b> Hortonworks</a></li>
<li class="chapter" data-level="5.3.3" data-path="on-premise.html"><a href="on-premise.html#mapr"><i class="fa fa-check"></i><b>5.3.3</b> MapR</a></li>
</ul></li>
<li class="chapter" data-level="5.4" data-path="cloud.html"><a href="cloud.html"><i class="fa fa-check"></i><b>5.4</b> Cloud</a><ul>
<li class="chapter" data-level="5.4.1" data-path="cloud.html"><a href="cloud.html#amazon"><i class="fa fa-check"></i><b>5.4.1</b> Amazon</a></li>
<li class="chapter" data-level="5.4.2" data-path="cloud.html"><a href="cloud.html#google"><i class="fa fa-check"></i><b>5.4.2</b> Google</a></li>
<li class="chapter" data-level="5.4.3" data-path="cloud.html"><a href="cloud.html#microsoft"><i class="fa fa-check"></i><b>5.4.3</b> Microsoft</a></li>
</ul></li>
<li class="chapter" data-level="5.5" data-path="tools.html"><a href="tools.html"><i class="fa fa-check"></i><b>5.5</b> Tools</a><ul>
<li class="chapter" data-level="5.5.1" data-path="tools.html"><a href="tools.html#rstudio"><i class="fa fa-check"></i><b>5.5.1</b> RStudio</a></li>
<li class="chapter" data-level="5.5.2" data-path="tools.html"><a href="tools.html#clusters-livy"><i class="fa fa-check"></i><b>5.5.2</b> Livy</a></li>
</ul></li>
<li class="chapter" data-level="5.6" data-path="recap-1.html"><a href="recap-1.html"><i class="fa fa-check"></i><b>5.6</b> Recap</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="connections.html"><a href="connections.html"><i class="fa fa-check"></i><b>6</b> Connections</a><ul>
<li class="chapter" data-level="6.1" data-path="overview-3.html"><a href="overview-3.html"><i class="fa fa-check"></i><b>6.1</b> Overview</a><ul>
<li class="chapter" data-level="6.1.1" data-path="overview-3.html"><a href="overview-3.html#edge-nodes"><i class="fa fa-check"></i><b>6.1.1</b> Edge Nodes</a></li>
<li class="chapter" data-level="6.1.2" data-path="overview-3.html"><a href="overview-3.html#spark-home"><i class="fa fa-check"></i><b>6.1.2</b> Spark Home</a></li>
</ul></li>
<li class="chapter" data-level="6.2" data-path="types.html"><a href="types.html"><i class="fa fa-check"></i><b>6.2</b> Types</a><ul>
<li class="chapter" data-level="6.2.1" data-path="types.html"><a href="types.html#connection-local"><i class="fa fa-check"></i><b>6.2.1</b> Local</a></li>
<li class="chapter" data-level="6.2.2" data-path="types.html"><a href="types.html#standalone"><i class="fa fa-check"></i><b>6.2.2</b> Standalone</a></li>
<li class="chapter" data-level="6.2.3" data-path="types.html"><a href="types.html#yarn-1"><i class="fa fa-check"></i><b>6.2.3</b> Yarn</a></li>
<li class="chapter" data-level="6.2.4" data-path="types.html"><a href="types.html#livy"><i class="fa fa-check"></i><b>6.2.4</b> Livy</a></li>
<li class="chapter" data-level="6.2.5" data-path="types.html"><a href="types.html#mesos-1"><i class="fa fa-check"></i><b>6.2.5</b> Mesos</a></li>
<li class="chapter" data-level="6.2.6" data-path="types.html"><a href="types.html#kubernetes-1"><i class="fa fa-check"></i><b>6.2.6</b> Kubernetes</a></li>
</ul></li>
<li class="chapter" data-level="6.3" data-path="troubleshooting.html"><a href="troubleshooting.html"><i class="fa fa-check"></i><b>6.3</b> Troubleshooting</a><ul>
<li class="chapter" data-level="6.3.1" data-path="troubleshooting.html"><a href="troubleshooting.html#logging"><i class="fa fa-check"></i><b>6.3.1</b> Logging</a></li>
<li class="chapter" data-level="6.3.2" data-path="troubleshooting.html"><a href="troubleshooting.html#troubleshoot-spark-submit"><i class="fa fa-check"></i><b>6.3.2</b> Spark Submit</a></li>
<li class="chapter" data-level="6.3.3" data-path="troubleshooting.html"><a href="troubleshooting.html#multiple"><i class="fa fa-check"></i><b>6.3.3</b> Multiple</a></li>
<li class="chapter" data-level="6.3.4" data-path="troubleshooting.html"><a href="troubleshooting.html#windows"><i class="fa fa-check"></i><b>6.3.4</b> Windows</a></li>
<li class="chapter" data-level="6.3.5" data-path="troubleshooting.html"><a href="troubleshooting.html#submit-manually"><i class="fa fa-check"></i><b>6.3.5</b> Submit Manually</a></li>
</ul></li>
<li class="chapter" data-level="6.4" data-path="recap-2.html"><a href="recap-2.html"><i class="fa fa-check"></i><b>6.4</b> Recap</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="data.html"><a href="data.html"><i class="fa fa-check"></i><b>7</b> Data</a><ul>
<li class="chapter" data-level="7.1" data-path="overview-4.html"><a href="overview-4.html"><i class="fa fa-check"></i><b>7.1</b> Overview</a></li>
<li class="chapter" data-level="7.2" data-path="dataframes.html"><a href="dataframes.html"><i class="fa fa-check"></i><b>7.2</b> DataFrames</a><ul>
<li class="chapter" data-level="7.2.1" data-path="dataframes.html"><a href="dataframes.html#data-sdf-functions"><i class="fa fa-check"></i><b>7.2.1</b> Functions</a></li>
</ul></li>
<li class="chapter" data-level="7.3" data-path="formats.html"><a href="formats.html"><i class="fa fa-check"></i><b>7.3</b> Formats</a></li>
<li class="chapter" data-level="7.4" data-path="data-types.html"><a href="data-types.html"><i class="fa fa-check"></i><b>7.4</b> Data Types</a><ul>
<li class="chapter" data-level="7.4.1" data-path="data-types.html"><a href="data-types.html#dates"><i class="fa fa-check"></i><b>7.4.1</b> Dates</a></li>
</ul></li>
<li class="chapter" data-level="7.5" data-path="external.html"><a href="external.html"><i class="fa fa-check"></i><b>7.5</b> External</a><ul>
<li class="chapter" data-level="7.5.1" data-path="external.html"><a href="external.html#amazon-s3"><i class="fa fa-check"></i><b>7.5.1</b> Amazon S3</a></li>
<li class="chapter" data-level="7.5.2" data-path="external.html"><a href="external.html#cassandra"><i class="fa fa-check"></i><b>7.5.2</b> Cassandra</a></li>
<li class="chapter" data-level="7.5.3" data-path="external.html"><a href="external.html#databases"><i class="fa fa-check"></i><b>7.5.3</b> Databases</a></li>
<li class="chapter" data-level="7.5.4" data-path="external.html"><a href="external.html#switching"><i class="fa fa-check"></i><b>7.5.4</b> Switching</a></li>
<li class="chapter" data-level="7.5.5" data-path="external.html"><a href="external.html#hbase"><i class="fa fa-check"></i><b>7.5.5</b> HBase</a></li>
<li class="chapter" data-level="7.5.6" data-path="external.html"><a href="external.html#nested-data"><i class="fa fa-check"></i><b>7.5.6</b> Nested Data</a></li>
</ul></li>
<li class="chapter" data-level="7.6" data-path="troubleshooting-1.html"><a href="troubleshooting-1.html"><i class="fa fa-check"></i><b>7.6</b> Troubleshooting</a><ul>
<li class="chapter" data-level="7.6.1" data-path="troubleshooting-1.html"><a href="troubleshooting-1.html#troubleshoot-csvs"><i class="fa fa-check"></i><b>7.6.1</b> Troubleshoot CSVs</a></li>
<li class="chapter" data-level="7.6.2" data-path="troubleshooting-1.html"><a href="troubleshooting-1.html#column-names"><i class="fa fa-check"></i><b>7.6.2</b> Column Names</a></li>
</ul></li>
<li class="chapter" data-level="7.7" data-path="recap-3.html"><a href="recap-3.html"><i class="fa fa-check"></i><b>7.7</b> Recap</a></li>
</ul></li>
<li class="chapter" data-level="8" data-path="tuning.html"><a href="tuning.html"><i class="fa fa-check"></i><b>8</b> Tuning</a><ul>
<li class="chapter" data-level="8.1" data-path="overview-5.html"><a href="overview-5.html"><i class="fa fa-check"></i><b>8.1</b> Overview</a><ul>
<li class="chapter" data-level="8.1.1" data-path="overview-5.html"><a href="overview-5.html#tunning-graph-vusualization"><i class="fa fa-check"></i><b>8.1.1</b> Graph Visualization</a></li>
<li class="chapter" data-level="8.1.2" data-path="overview-5.html"><a href="overview-5.html#tunning-event-timeline"><i class="fa fa-check"></i><b>8.1.2</b> Event Timeline</a></li>
</ul></li>
<li class="chapter" data-level="8.2" data-path="tunning-configuring.html"><a href="tunning-configuring.html"><i class="fa fa-check"></i><b>8.2</b> Configuring</a><ul>
<li class="chapter" data-level="8.2.1" data-path="tunning-configuring.html"><a href="tunning-configuring.html#submit-settings"><i class="fa fa-check"></i><b>8.2.1</b> Submit Settings</a></li>
<li class="chapter" data-level="8.2.2" data-path="tunning-configuring.html"><a href="tunning-configuring.html#runtime-settings"><i class="fa fa-check"></i><b>8.2.2</b> Runtime Settings</a></li>
<li class="chapter" data-level="8.2.3" data-path="tunning-configuring.html"><a href="tunning-configuring.html#sparklyr-settings"><i class="fa fa-check"></i><b>8.2.3</b> Sparklyr Settings</a></li>
</ul></li>
<li class="chapter" data-level="8.3" data-path="tunning-partitioning.html"><a href="tunning-partitioning.html"><i class="fa fa-check"></i><b>8.3</b> Partitioning</a><ul>
<li class="chapter" data-level="8.3.1" data-path="tunning-partitioning.html"><a href="tunning-partitioning.html#implicit"><i class="fa fa-check"></i><b>8.3.1</b> Implicit</a></li>
<li class="chapter" data-level="8.3.2" data-path="tunning-partitioning.html"><a href="tunning-partitioning.html#explicit"><i class="fa fa-check"></i><b>8.3.2</b> Explicit</a></li>
</ul></li>
<li class="chapter" data-level="8.4" data-path="tunning-caching.html"><a href="tunning-caching.html"><i class="fa fa-check"></i><b>8.4</b> Caching</a><ul>
<li class="chapter" data-level="8.4.1" data-path="tunning-caching.html"><a href="tunning-caching.html#checkpointing"><i class="fa fa-check"></i><b>8.4.1</b> Checkpointing</a></li>
<li class="chapter" data-level="8.4.2" data-path="tunning-caching.html"><a href="tunning-caching.html#tunning-memory"><i class="fa fa-check"></i><b>8.4.2</b> Memory</a></li>
</ul></li>
<li class="chapter" data-level="8.5" data-path="tunning-shuffling.html"><a href="tunning-shuffling.html"><i class="fa fa-check"></i><b>8.5</b> Shuffling</a></li>
<li class="chapter" data-level="8.6" data-path="tunning-serialization.html"><a href="tunning-serialization.html"><i class="fa fa-check"></i><b>8.6</b> Serialization</a></li>
<li class="chapter" data-level="8.7" data-path="recap-4.html"><a href="recap-4.html"><i class="fa fa-check"></i><b>8.7</b> Recap</a></li>
</ul></li>
<li class="part"><span><b>IV Extensions</b></span></li>
<li class="chapter" data-level="9" data-path="extensions.html"><a href="extensions.html"><i class="fa fa-check"></i><b>9</b> Extensions</a><ul>
<li class="chapter" data-level="9.1" data-path="rsparkling.html"><a href="rsparkling.html"><i class="fa fa-check"></i><b>9.1</b> RSparkling</a></li>
<li class="chapter" data-level="9.2" data-path="graphframes.html"><a href="graphframes.html"><i class="fa fa-check"></i><b>9.2</b> GraphFrames</a></li>
<li class="chapter" data-level="9.3" data-path="mleap.html"><a href="mleap.html"><i class="fa fa-check"></i><b>9.3</b> Mleap</a></li>
<li class="chapter" data-level="9.4" data-path="extensions-nested-data.html"><a href="extensions-nested-data.html"><i class="fa fa-check"></i><b>9.4</b> Nested Data</a></li>
</ul></li>
<li class="part"><span><b>V Advanced</b></span></li>
<li class="chapter" data-level="10" data-path="distributed.html"><a href="distributed.html"><i class="fa fa-check"></i><b>10</b> Distributed R</a><ul>
<li class="chapter" data-level="10.1" data-path="use-cases.html"><a href="use-cases.html"><i class="fa fa-check"></i><b>10.1</b> Use Cases</a><ul>
<li class="chapter" data-level="10.1.1" data-path="use-cases.html"><a href="use-cases.html#embarrassingly-parallel"><i class="fa fa-check"></i><b>10.1.1</b> Embarrassingly Parallel</a></li>
</ul></li>
<li class="chapter" data-level="10.2" data-path="columns.html"><a href="columns.html"><i class="fa fa-check"></i><b>10.2</b> Columns</a><ul>
<li class="chapter" data-level="10.2.1" data-path="columns.html"><a href="columns.html#inference"><i class="fa fa-check"></i><b>10.2.1</b> Inference</a></li>
<li class="chapter" data-level="10.2.2" data-path="columns.html"><a href="columns.html#excplicit"><i class="fa fa-check"></i><b>10.2.2</b> Excplicit</a></li>
</ul></li>
<li class="chapter" data-level="10.3" data-path="grouping.html"><a href="grouping.html"><i class="fa fa-check"></i><b>10.3</b> Grouping</a></li>
<li class="chapter" data-level="10.4" data-path="packages.html"><a href="packages.html"><i class="fa fa-check"></i><b>10.4</b> Packages</a></li>
<li class="chapter" data-level="10.5" data-path="restrictions.html"><a href="restrictions.html"><i class="fa fa-check"></i><b>10.5</b> Restrictions</a></li>
<li class="chapter" data-level="10.6" data-path="troubleshooting-2.html"><a href="troubleshooting-2.html"><i class="fa fa-check"></i><b>10.6</b> Troubleshooting</a><ul>
<li class="chapter" data-level="10.6.1" data-path="troubleshooting-2.html"><a href="troubleshooting-2.html#tips"><i class="fa fa-check"></i><b>10.6.1</b> Tips</a></li>
<li class="chapter" data-level="10.6.2" data-path="troubleshooting-2.html"><a href="troubleshooting-2.html#logs-1"><i class="fa fa-check"></i><b>10.6.2</b> Logs</a></li>
<li class="chapter" data-level="10.6.3" data-path="troubleshooting-2.html"><a href="troubleshooting-2.html#debugging"><i class="fa fa-check"></i><b>10.6.3</b> Debugging</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="11" data-path="streaming.html"><a href="streaming.html"><i class="fa fa-check"></i><b>11</b> Streaming</a><ul>
<li class="chapter" data-level="11.1" data-path="overview-6.html"><a href="overview-6.html"><i class="fa fa-check"></i><b>11.1</b> Overview</a></li>
<li class="chapter" data-level="11.2" data-path="transformations.html"><a href="transformations.html"><i class="fa fa-check"></i><b>11.2</b> Transformations</a><ul>
<li class="chapter" data-level="11.2.1" data-path="transformations.html"><a href="transformations.html#streams-dplyr"><i class="fa fa-check"></i><b>11.2.1</b> dplyr</a></li>
<li class="chapter" data-level="11.2.2" data-path="transformations.html"><a href="transformations.html#streams-pipelines"><i class="fa fa-check"></i><b>11.2.2</b> Pipelines</a></li>
<li class="chapter" data-level="11.2.3" data-path="transformations.html"><a href="transformations.html#streams-r"><i class="fa fa-check"></i><b>11.2.3</b> R Code</a></li>
</ul></li>
<li class="chapter" data-level="11.3" data-path="shiny.html"><a href="shiny.html"><i class="fa fa-check"></i><b>11.3</b> Shiny</a></li>
<li class="chapter" data-level="11.4" data-path="formats-1.html"><a href="formats-1.html"><i class="fa fa-check"></i><b>11.4</b> Formats</a></li>
</ul></li>
<li class="chapter" data-level="12" data-path="contributing.html"><a href="contributing.html"><i class="fa fa-check"></i><b>12</b> Contributing</a><ul>
<li class="chapter" data-level="12.1" data-path="overview-7.html"><a href="overview-7.html"><i class="fa fa-check"></i><b>12.1</b> Overview</a></li>
<li class="chapter" data-level="12.2" data-path="contributing-extensions.html"><a href="contributing-extensions.html"><i class="fa fa-check"></i><b>12.2</b> Extensions</a><ul>
<li class="chapter" data-level="12.2.1" data-path="contributing-extensions.html"><a href="contributing-extensions.html#rstudio-projects"><i class="fa fa-check"></i><b>12.2.1</b> RStudio Projects</a></li>
<li class="chapter" data-level="12.2.2" data-path="contributing-extensions.html"><a href="contributing-extensions.html#troubleshooting-3"><i class="fa fa-check"></i><b>12.2.2</b> Troubleshooting</a></li>
</ul></li>
<li class="chapter" data-level="12.3" data-path="contributing-sparklyr.html"><a href="contributing-sparklyr.html"><i class="fa fa-check"></i><b>12.3</b> sparklyr</a><ul>
<li class="chapter" data-level="12.3.1" data-path="contributing-sparklyr.html"><a href="contributing-sparklyr.html#scala"><i class="fa fa-check"></i><b>12.3.1</b> Scala</a></li>
<li class="chapter" data-level="12.3.2" data-path="contributing-sparklyr.html"><a href="contributing-sparklyr.html#serialization"><i class="fa fa-check"></i><b>12.3.2</b> Serialization</a></li>
<li class="chapter" data-level="12.3.3" data-path="contributing-sparklyr.html"><a href="contributing-sparklyr.html#invocations"><i class="fa fa-check"></i><b>12.3.3</b> Invocations</a></li>
<li class="chapter" data-level="12.3.4" data-path="contributing-sparklyr.html"><a href="contributing-sparklyr.html#r-packages"><i class="fa fa-check"></i><b>12.3.4</b> R Packages</a></li>
<li class="chapter" data-level="12.3.5" data-path="contributing-sparklyr.html"><a href="contributing-sparklyr.html#connections-1"><i class="fa fa-check"></i><b>12.3.5</b> Connections</a></li>
<li class="chapter" data-level="12.3.6" data-path="contributing-sparklyr.html"><a href="contributing-sparklyr.html#distributed-r"><i class="fa fa-check"></i><b>12.3.6</b> Distributed R</a></li>
</ul></li>
</ul></li>
<li class="part"><span><b>VI Appendix</b></span></li>
<li class="chapter" data-level="13" data-path="appendix.html"><a href="appendix.html"><i class="fa fa-check"></i><b>13</b> Appendix</a><ul>
<li class="chapter" data-level="13.1" data-path="diagrams.html"><a href="diagrams.html"><i class="fa fa-check"></i><b>13.1</b> Diagrams</a><ul>
<li class="chapter" data-level="13.1.1" data-path="diagrams.html"><a href="diagrams.html#storage-capacity"><i class="fa fa-check"></i><b>13.1.1</b> Worlds Store Capacity</a></li>
<li class="chapter" data-level="13.1.2" data-path="diagrams.html"><a href="diagrams.html#cran-downloads"><i class="fa fa-check"></i><b>13.1.2</b> Daily downloads of CRAN packages</a></li>
<li class="chapter" data-level="13.1.3" data-path="diagrams.html"><a href="diagrams.html#cluster-trends"><i class="fa fa-check"></i><b>13.1.3</b> Google trends for mainframes, cloud computing and kubernetes</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="14" data-path="references.html"><a href="references.html"><i class="fa fa-check"></i><b>14</b> References</a></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">The R in Spark: Learning Apache Spark with R</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="tunning-configuring" class="section level2">
<h2><span class="header-section-number">8.2</span> Configuring</h2>
<p>When tuning a Spark application, consider defining a configuration specification to describe the resources your application needs to successfully run at scale.</p>
<p>Some of the most obvious resources you would want to define are:</p>
<ul>
<li><strong>Memory in Driver:</strong> The amount of memory available in the driver node, it is convenient to have significantly more memory available in the driver than the worker nodes.</li>
<li><strong>Number of Workers:</strong>. The number of workers required to be configured for this session.</li>
<li><strong>Memory per Worker:</strong> The amount of memory available to the worker node.</li>
</ul>
<p>In local mode, <code>spark_connect(master = &quot;local&quot;)</code>; as mentioned in the <a href="types.html#connection-local">local connections</a> section, there are no workers; however, but we can set the driver settings through:</p>
<div class="sourceCode" id="cb74"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb74-1" data-line-number="1"><span class="co"># Initialize configuration with defaults</span></a>
<a class="sourceLine" id="cb74-2" data-line-number="2">config &lt;-<span class="st"> </span><span class="kw">spark_config</span>()</a>
<a class="sourceLine" id="cb74-3" data-line-number="3"></a>
<a class="sourceLine" id="cb74-4" data-line-number="4"><span class="co"># Memory in Driver</span></a>
<a class="sourceLine" id="cb74-5" data-line-number="5">config[<span class="st">&quot;sparklyr.shell.driver-memory&quot;</span>] &lt;-<span class="st"> &quot;2g&quot;</span></a>
<a class="sourceLine" id="cb74-6" data-line-number="6"></a>
<a class="sourceLine" id="cb74-7" data-line-number="7"><span class="co"># Number of Workers</span></a>
<a class="sourceLine" id="cb74-8" data-line-number="8">config[<span class="st">&quot;sparklyr.connect.cores.local&quot;</span>] &lt;-<span class="st"> </span><span class="dv">2</span></a>
<a class="sourceLine" id="cb74-9" data-line-number="9"></a>
<a class="sourceLine" id="cb74-10" data-line-number="10"><span class="co"># Connect to local cluster with custom configuration</span></a>
<a class="sourceLine" id="cb74-11" data-line-number="11">sc &lt;-<span class="st"> </span><span class="kw">spark_connect</span>(<span class="dt">master =</span> <span class="st">&quot;local&quot;</span>, <span class="dt">config =</span> config)</a></code></pre></div>
<p>When Spark runs in Hadoop Yarn, <code>spark_connect(master = &quot;yarn&quot;)</code>:</p>
<div class="sourceCode" id="cb75"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb75-1" data-line-number="1"><span class="co"># Initialize configuration with defaults</span></a>
<a class="sourceLine" id="cb75-2" data-line-number="2">config &lt;-<span class="st"> </span><span class="kw">spark_config</span>()</a>
<a class="sourceLine" id="cb75-3" data-line-number="3"></a>
<a class="sourceLine" id="cb75-4" data-line-number="4"><span class="co"># Memory in Driver</span></a>
<a class="sourceLine" id="cb75-5" data-line-number="5">config[<span class="st">&quot;sparklyr.shell.driver-memory&quot;</span>] &lt;-<span class="st"> &quot;2g&quot;</span></a>
<a class="sourceLine" id="cb75-6" data-line-number="6"></a>
<a class="sourceLine" id="cb75-7" data-line-number="7"><span class="co"># Number of Workers</span></a>
<a class="sourceLine" id="cb75-8" data-line-number="8">config[<span class="st">&quot;sparklyr.shell.executor-cores&quot;</span>] &lt;-<span class="st"> </span><span class="dv">3</span></a>
<a class="sourceLine" id="cb75-9" data-line-number="9"></a>
<a class="sourceLine" id="cb75-10" data-line-number="10"><span class="co"># Memory per Worker</span></a>
<a class="sourceLine" id="cb75-11" data-line-number="11">config[<span class="st">&quot;sparklyr.shell.executor-memory&quot;</span>] &lt;-<span class="st"> &quot;2g&quot;</span></a>
<a class="sourceLine" id="cb75-12" data-line-number="12"></a>
<a class="sourceLine" id="cb75-13" data-line-number="13"><span class="co"># Connect to Yarn with custom configuration</span></a>
<a class="sourceLine" id="cb75-14" data-line-number="14">sc &lt;-<span class="st"> </span><span class="kw">spark_connect</span>(<span class="dt">master =</span> <span class="st">&quot;yarn&quot;</span>, <span class="dt">config =</span> config)</a></code></pre></div>
<p>Notice that some of the settings are different between <a href="clusters.html#clusters">clusters</a>, local and Yarn in the examples above. Therefore, it is common to research online which settings your cluster managers expects.</p>
<p>There are a few types of configuration settings:</p>
<ul>
<li><strong>Submit</strong> settings are set while <code>sparklyr</code> is being submitted to Spark. For instance, they can configure the driver node.</li>
<li><strong>Runtime</strong> settings configure Spark when the Spark session is created. For instance, to configure worker nodes settings.</li>
<li><strong>Sparklyr</strong> settings configure <code>sparklyr</code> behaviour. For instance,<code>sparklyr.verbose</code> controls how much diagnostics data is printed.</li>
</ul>
<div id="submit-settings" class="section level3">
<h3><span class="header-section-number">8.2.1</span> Submit Settings</h3>
<p>Some settings must be specified when <code>spark-submit</code> (the terminal application that launches Spark) is run. For instance, since <code>spark-submit</code> launches driver node which runs as a Java instance, choosing how much memory is allocated needs to be specified as a parameter to <code>spark-submit</code>.</p>
<p>You can list all the available <code>spark-submit</code> parameters by running:</p>
<div class="sourceCode" id="cb76"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb76-1" data-line-number="1"><span class="kw">spark_home_dir</span>() <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">file.path</span>(<span class="st">&quot;bin&quot;</span>, <span class="st">&quot;spark-submit&quot;</span>) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">system2</span>()</a></code></pre></div>
<pre><code>Usage: spark-submit [options] &lt;app jar | python file | R file&gt; [app arguments]
Usage: spark-submit --kill [submission ID] --master [spark://...]
Usage: spark-submit --status [submission ID] --master [spark://...]
Usage: spark-submit run-example [options] example-class [example args]

Options:
  --master MASTER_URL         spark://host:port, mesos://host:port, yarn,
                              k8s://https://host:port, or local (Default: local[*]).
  --deploy-mode DEPLOY_MODE   Whether to launch the driver program locally (&quot;client&quot;) or
                              on one of the worker machines inside the cluster (&quot;cluster&quot;)
                              (Default: client).
  --class CLASS_NAME          Your application&#39;s main class (for Java / Scala apps).
  --name NAME                 A name of your application.
  --jars JARS                 Comma-separated list of jars to include on the driver
                              and executor classpaths.
  --packages                  Comma-separated list of maven coordinates of jars to include
                              on the driver and executor classpaths. Will search the local
                              maven repo, then maven central and any additional remote
                              repositories given by --repositories. The format for the
                              coordinates should be groupId:artifactId:version.
  --exclude-packages          Comma-separated list of groupId:artifactId, to exclude while
                              resolving the dependencies provided in --packages to avoid
                              dependency conflicts.
  --repositories              Comma-separated list of additional remote repositories to
                              search for the maven coordinates given with --packages.
  --py-files PY_FILES         Comma-separated list of .zip, .egg, or .py files to place
                              on the PYTHONPATH for Python apps.
  --files FILES               Comma-separated list of files to be placed in the working
                              directory of each executor. File paths of these files
                              in executors can be accessed via SparkFiles.get(fileName).

  --conf PROP=VALUE           Arbitrary Spark configuration property.
  --properties-file FILE      Path to a file from which to load extra properties. If not
                              specified, this will look for conf/spark-defaults.conf.

  --driver-memory MEM         Memory for driver (e.g. 1000M, 2G) (Default: 1024M).
  --driver-java-options       Extra Java options to pass to the driver.
  --driver-library-path       Extra library path entries to pass to the driver.
  --driver-class-path         Extra class path entries to pass to the driver. Note that
                              jars added with --jars are automatically included in the
                              classpath.

  --executor-memory MEM       Memory per executor (e.g. 1000M, 2G) (Default: 1G).

  --proxy-user NAME           User to impersonate when submitting the application.
                              This argument does not work with --principal / --keytab.

  --help, -h                  Show this help message and exit.
  --verbose, -v               Print additional debug output.
  --version,                  Print the version of current Spark.

 Cluster deploy mode only:
  --driver-cores NUM          Number of cores used by the driver, only in cluster mode
                              (Default: 1).

 Spark standalone or Mesos with cluster deploy mode only:
  --supervise                 If given, restarts the driver on failure.
  --kill SUBMISSION_ID        If given, kills the driver specified.
  --status SUBMISSION_ID      If given, requests the status of the driver specified.

 Spark standalone and Mesos only:
  --total-executor-cores NUM  Total cores for all executors.

 Spark standalone and YARN only:
  --executor-cores NUM        Number of cores per executor. (Default: 1 in YARN mode,
                              or all available cores on the worker in standalone mode)

 YARN-only:
  --queue QUEUE_NAME          The YARN queue to submit to (Default: &quot;default&quot;).
  --num-executors NUM         Number of executors to launch (Default: 2).
                              If dynamic allocation is enabled, the initial number of
                              executors will be at least NUM.
  --archives ARCHIVES         Comma separated list of archives to be extracted into the
                              working directory of each executor.
  --principal PRINCIPAL       Principal to be used to login to KDC, while running on
                              secure HDFS.
  --keytab KEYTAB             The full path to the file that contains the keytab for the
                              principal specified above. This keytab will be copied to
                              the node running the Application Master via the Secure
                              Distributed Cache, for renewing the login tickets and the
                              delegation tokens periodically.
      </code></pre>
<p>Notice for instance the <code>--driver-memory</code> parameter, which we previously configured by setting:</p>
<div class="sourceCode" id="cb78"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb78-1" data-line-number="1">config &lt;-<span class="st"> </span><span class="kw">spark_config</span>()</a>
<a class="sourceLine" id="cb78-2" data-line-number="2">config[<span class="st">&quot;sparklyr.shell.driver-memory&quot;</span>] &lt;-<span class="st"> &quot;2gb&quot;</span></a></code></pre></div>
<p>In general, any <code>spark-submit</code> setting is configured through <code>sparklyr.shell.X</code> where <code>X</code> is the name of the <code>spark-submit</code> parameter without the <code>--</code> prefix.</p>
</div>
<div id="runtime-settings" class="section level3">
<h3><span class="header-section-number">8.2.2</span> Runtime Settings</h3>
<p>As mentioned, some <strong>Spark</strong> settings configure the session runtime. The runtime settings are a superset of the <a href="tunning-configuring.html#submit-settings">submit settings</a> since is usually helpfull to retrieve the current configuration even if a setting can’t be changed.</p>
<p>To list all the Spark settings available at runtime, we can run:</p>
<div class="sourceCode" id="cb79"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb79-1" data-line-number="1"><span class="kw">spark_session_config</span>(sc)</a></code></pre></div>
<pre><code>## Re-using existing Spark connection to local</code></pre>
<table>
<thead>
<tr class="header">
<th align="left">name</th>
<th align="left">value</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">spark.master</td>
<td align="left">local[4]</td>
</tr>
<tr class="even">
<td align="left">spark.sql.shuffle.partitions</td>
<td align="left">4</td>
</tr>
<tr class="odd">
<td align="left">spark.driver.port</td>
<td align="left">50493</td>
</tr>
<tr class="even">
<td align="left">spark.submit.deployMode</td>
<td align="left">client</td>
</tr>
<tr class="odd">
<td align="left">spark.executor.id</td>
<td align="left">driver</td>
</tr>
<tr class="even">
<td align="left">spark.jars</td>
<td align="left">/Library/…/sparklyr/java/sparklyr-2.3-2.11.jar</td>
</tr>
<tr class="odd">
<td align="left">spark.app.id</td>
<td align="left">local-1539060024910</td>
</tr>
<tr class="even">
<td align="left">spark.env.SPARK_LOCAL_IP</td>
<td align="left">127.0.0.1</td>
</tr>
<tr class="odd">
<td align="left">spark.sql.catalogImplementation</td>
<td align="left">hive</td>
</tr>
<tr class="even">
<td align="left">spark.spark.port.maxRetries</td>
<td align="left">128</td>
</tr>
<tr class="odd">
<td align="left">spark.app.name</td>
<td align="left">sparklyr</td>
</tr>
<tr class="even">
<td align="left">spark.home</td>
<td align="left">/Users/…/spark/spark-2.3.1-bin-hadoop2.7</td>
</tr>
<tr class="odd">
<td align="left">spark.driver.host</td>
<td align="left">localhost</td>
</tr>
</tbody>
</table>
<p>See also, <a href="https://spark.apache.org/docs/latest/configuration.html">spark.apache.org/docs/latest/configuration.html</a>.</p>
</div>
<div id="sparklyr-settings" class="section level3">
<h3><span class="header-section-number">8.2.3</span> Sparklyr Settings</h3>
<p>Appart from Spark settings, there are a few settings particular to sparklyr listed bellow. <code>sparklyr.connect.cores</code> is useful to set the CPU cores to use in local mode; the remaining ones are not used as much while tuning, but they can prove helpful while troubleshooting other issues.</p>
<div class="sourceCode" id="cb81"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb81-1" data-line-number="1"><span class="kw">spark_config_settings</span>()</a></code></pre></div>
<table>
<thead>
<tr class="header">
<th align="left">name</th>
<th align="left">description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">sparklyr.apply.packages</td>
<td align="left">Configures default value for packages parameter in spark_apply().</td>
</tr>
<tr class="even">
<td align="left">sparklyr.apply.rlang</td>
<td align="left">Experimental feature. Turns on improved serialization for spark_apply().</td>
</tr>
<tr class="odd">
<td align="left">sparklyr.apply.schema.infer</td>
<td align="left">Number of rows collected to infer schema when column types specified in spark_apply().</td>
</tr>
<tr class="even">
<td align="left">sparklyr.arrow</td>
<td align="left">Use Apache Arrow to serialize data?</td>
</tr>
<tr class="odd">
<td align="left">sparklyr.backend.interval</td>
<td align="left">Total seconds sparklyr will check on a backend operation.</td>
</tr>
<tr class="even">
<td align="left">sparklyr.backend.timeout</td>
<td align="left">Total seconds before sparklyr will give up waiting for a backend operation to complete.</td>
</tr>
<tr class="odd">
<td align="left">sparklyr.connect.aftersubmit</td>
<td align="left">R function to call after spark-submit executes.</td>
</tr>
<tr class="even">
<td align="left">sparklyr.connect.app.jar</td>
<td align="left">The path to the sparklyr jar used in spark_connect().</td>
</tr>
<tr class="odd">
<td align="left">sparklyr.connect.cores.local</td>
<td align="left">Number of cores to use in spark_connect(master = “local”), defaults to parallel::detectCores().</td>
</tr>
<tr class="even">
<td align="left">sparklyr.connect.csv.embedded</td>
<td align="left">Regular expression to match against versions of Spark that require package extension to support CSVs.</td>
</tr>
<tr class="odd">
<td align="left">sparklyr.connect.csv.scala11</td>
<td align="left">Use Scala 2.11 jars when using embedded CSV jars in Spark 1.6.X.</td>
</tr>
<tr class="even">
<td align="left">sparklyr.connect.jars</td>
<td align="left">Additional JARs to include while submitting application to Spark.</td>
</tr>
<tr class="odd">
<td align="left">sparklyr.connect.master</td>
<td align="left">The cluster master as spark_connect() master parameter, notice that the ‘spark.master’ setting is usually preferred.</td>
</tr>
<tr class="even">
<td align="left">sparklyr.connect.packages</td>
<td align="left">Spark packages to include when connecting to Spark.</td>
</tr>
<tr class="odd">
<td align="left">sparklyr.connect.sparksubmit</td>
<td align="left">Command executed instead of spark-submit when connecting.</td>
</tr>
<tr class="even">
<td align="left">sparklyr.connect.timeout</td>
<td align="left">Total seconds before giving up connecting to the sparklyr gateway while initializing.</td>
</tr>
<tr class="odd">
<td align="left">sparklyr.gateway.address</td>
<td align="left">The address of the driver machine.</td>
</tr>
<tr class="even">
<td align="left">sparklyr.gateway.config.retries</td>
<td align="left">Number of retries to retrieve port and address from config, useful when using functions to query port or address in kubernetes.</td>
</tr>
<tr class="odd">
<td align="left">sparklyr.gateway.interval</td>
<td align="left">Total of seconds sparkyr wil check on a gateway connection.</td>
</tr>
<tr class="even">
<td align="left">sparklyr.gateway.port</td>
<td align="left">The port the sparklyr gateway uses in the driver machine.</td>
</tr>
<tr class="odd">
<td align="left">sparklyr.gateway.remote</td>
<td align="left">Should the sparklyr gateway allow remote connections? This is required in yarn cluster, etc.</td>
</tr>
<tr class="even">
<td align="left">sparklyr.gateway.routing</td>
<td align="left">Should the sparklyr gateway service route to other sessions? Consider disabling in kubernetes.</td>
</tr>
<tr class="odd">
<td align="left">sparklyr.gateway.service</td>
<td align="left">Should the sparklyr gateway be run as a service without shutting down when the last connection disconnects?</td>
</tr>
<tr class="even">
<td align="left">sparklyr.gateway.timeout</td>
<td align="left">Total seconds before giving up connecting to the sparklyr gateway after initialization.</td>
</tr>
<tr class="odd">
<td align="left">sparklyr.gateway.wait</td>
<td align="left">Total seconds to wait before retrying to contact the sparklyr gateway.</td>
</tr>
<tr class="even">
<td align="left">sparklyr.log.invoke</td>
<td align="left">Should every call to invoke() be printed in the console? Can be set to ‘callstack’ to log callstack.</td>
</tr>
<tr class="odd">
<td align="left">sparklyr.log.console</td>
<td align="left">Should driver logs be printed in the console?</td>
</tr>
<tr class="even">
<td align="left">sparklyr.progress</td>
<td align="left">Should job progress be reported to RStudio?</td>
</tr>
<tr class="odd">
<td align="left">sparklyr.progress.interval</td>
<td align="left">Total of seconds to wait before attempting to retrieve job progress in Spark.</td>
</tr>
<tr class="even">
<td align="left">sparklyr.sanitize.column.names</td>
<td align="left">Should partially unsupported column names be cleaned up?</td>
</tr>
<tr class="odd">
<td align="left">sparklyr.stream.collect.timeout</td>
<td align="left">Total seconds before stoping collecting a stream sample in sdf_collect_stream().</td>
</tr>
<tr class="even">
<td align="left">sparklyr.stream.validate.timeout</td>
<td align="left">Total seconds before stoping to check if stream has errors while being created.</td>
</tr>
<tr class="odd">
<td align="left">sparklyr.verbose</td>
<td align="left">Use verbose logging across all sparklyr operations?</td>
</tr>
<tr class="even">
<td align="left">sparklyr.verbose.na</td>
<td align="left">Use verbose logging when dealing with NAs?</td>
</tr>
<tr class="odd">
<td align="left">sparklyr.verbose.sanitize</td>
<td align="left">Use verbose logging while sanitizing columns and other objects?</td>
</tr>
<tr class="even">
<td align="left">sparklyr.worker.gateway.address</td>
<td align="left">The address of the worker machine, most likely localhost.</td>
</tr>
<tr class="odd">
<td align="left">sparklyr.worker.gateway.port</td>
<td align="left">The port the sparklyr gateway uses in the driver machine.</td>
</tr>
<tr class="even">
<td align="left">sparklyr.yarn.cluster.accepted.timeout</td>
<td align="left">Total seconds before giving up waiting for cluster resources in yarn cluster mode.</td>
</tr>
<tr class="odd">
<td align="left">sparklyr.yarn.cluster.hostaddress.timeout</td>
<td align="left">Total seconds before giving up waiting for the cluster to assign a host address in yarn cluster mode.</td>
</tr>
<tr class="even">
<td align="left">sparklyr.yarn.cluster.lookup.byname</td>
<td align="left">Should the current user name be used to filter yarn cluster jobs while searching for submitted one?</td>
</tr>
<tr class="odd">
<td align="left">sparklyr.yarn.cluster.lookup.prefix</td>
<td align="left">Application name prefix used to filter yarn cluster jobs while searching for submitted one.</td>
</tr>
<tr class="even">
<td align="left">sparklyr.yarn.cluster.lookup.username</td>
<td align="left">The user name used to filter yarn cluster jobs while searching for submitted one.</td>
</tr>
<tr class="odd">
<td align="left">sparklyr.yarn.cluster.start.timeout</td>
<td align="left">Total seconds before giving up waiting for yarn cluster application to get registered.</td>
</tr>
</tbody>
</table>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="overview-5.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="tunning-partitioning.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": true,
"facebook": false,
"twitter": true,
"google": false,
"linkedin": false,
"weibo": false,
"instapper": false,
"vk": false,
"all": ["facebook", "google", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"download": null,
"toc": {
"collapse": "subsection"
}
});
});
</script>

</body>

</html>
