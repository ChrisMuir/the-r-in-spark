<!DOCTYPE html>
<html >

<head>

  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title>The R in Spark: Learning Apache Spark with R</title>
  <meta name="description" content="A book to learn Apache Spark using R.">
  <meta name="generator" content="bookdown 0.7 and GitBook 2.6.7">

  <meta property="og:title" content="The R in Spark: Learning Apache Spark with R" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="A book to learn Apache Spark using R." />
  <meta name="github-repo" content="javierluraschi/the-r-in-spark" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="The R in Spark: Learning Apache Spark with R" />
  
  <meta name="twitter:description" content="A book to learn Apache Spark using R." />
  

<meta name="author" content="Javier Luraschi">


<meta name="date" content="2018-07-10">

  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">
  
  
<link rel="prev" href="intro.html">
<link rel="next" href="modeling.html">
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />







<script src="libs/htmlwidgets-1.2/htmlwidgets.js"></script>
<script src="libs/r2d3-render-0.1.0/r2d3-render.js"></script>
<script src="libs/webcomponents-2.0.0/webcomponents.js"></script>
<script src="libs/r2d3-binding-0.2.2/r2d3.js"></script>
<script src="libs/d3v5-5.0.0/d3.min.js"></script>
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-119986300-1"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-119986300-1');
</script>


<style type="text/css">
a.sourceLine { display: inline-block; line-height: 1.25; }
a.sourceLine { pointer-events: none; color: inherit; text-decoration: inherit; }
a.sourceLine:empty { height: 1.2em; position: absolute; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
a.sourceLine { text-indent: -1em; padding-left: 1em; }
}
pre.numberSource a.sourceLine
  { position: relative; }
pre.numberSource a.sourceLine:empty
  { position: absolute; }
pre.numberSource a.sourceLine::before
  { content: attr(data-line-number);
    position: absolute; left: -5em; text-align: right; vertical-align: baseline;
    border: none; pointer-events: all;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  }
@media screen {
a.sourceLine::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Learning Apache Spark with R</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Preface</a></li>
<li class="chapter" data-level="1" data-path="intro.html"><a href="intro.html"><i class="fa fa-check"></i><b>1</b> Introduction</a><ul>
<li class="chapter" data-level="1.1" data-path="intro.html"><a href="intro.html#background"><i class="fa fa-check"></i><b>1.1</b> Background</a></li>
<li class="chapter" data-level="1.2" data-path="intro.html"><a href="intro.html#spark"><i class="fa fa-check"></i><b>1.2</b> Spark</a></li>
<li class="chapter" data-level="1.3" data-path="intro.html"><a href="intro.html#r"><i class="fa fa-check"></i><b>1.3</b> R</a></li>
<li class="chapter" data-level="1.4" data-path="intro.html"><a href="intro.html#sparklyr"><i class="fa fa-check"></i><b>1.4</b> sparklyr</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="installation.html"><a href="installation.html"><i class="fa fa-check"></i><b>2</b> Installation</a><ul>
<li class="chapter" data-level="2.1" data-path="installation.html"><a href="installation.html#prerequisites"><i class="fa fa-check"></i><b>2.1</b> Prerequisites</a><ul>
<li class="chapter" data-level="2.1.1" data-path="installation.html"><a href="installation.html#install-r"><i class="fa fa-check"></i><b>2.1.1</b> Install R</a></li>
<li class="chapter" data-level="2.1.2" data-path="installation.html"><a href="installation.html#install-java"><i class="fa fa-check"></i><b>2.1.2</b> Install Java</a></li>
<li class="chapter" data-level="2.1.3" data-path="installation.html"><a href="installation.html#install-rstudio"><i class="fa fa-check"></i><b>2.1.3</b> Install RStudio</a></li>
<li class="chapter" data-level="2.1.4" data-path="installation.html"><a href="installation.html#install-sparklyr"><i class="fa fa-check"></i><b>2.1.4</b> Install sparklyr</a></li>
</ul></li>
<li class="chapter" data-level="2.2" data-path="installation.html"><a href="installation.html#installing-spark"><i class="fa fa-check"></i><b>2.2</b> Installing Spark</a></li>
<li class="chapter" data-level="2.3" data-path="installation.html"><a href="installation.html#connecting-to-spark"><i class="fa fa-check"></i><b>2.3</b> Connecting to Spark</a></li>
<li class="chapter" data-level="2.4" data-path="installation.html"><a href="installation.html#using-spark"><i class="fa fa-check"></i><b>2.4</b> Using Spark</a><ul>
<li class="chapter" data-level="2.4.1" data-path="installation.html"><a href="installation.html#spark-web-interface"><i class="fa fa-check"></i><b>2.4.1</b> Web Interface</a></li>
<li class="chapter" data-level="2.4.2" data-path="installation.html"><a href="installation.html#logs"><i class="fa fa-check"></i><b>2.4.2</b> Logs</a></li>
<li class="chapter" data-level="2.4.3" data-path="installation.html"><a href="installation.html#using-spark-from-rstudio"><i class="fa fa-check"></i><b>2.4.3</b> RStudio</a></li>
</ul></li>
<li class="chapter" data-level="2.5" data-path="installation.html"><a href="installation.html#disconnecting"><i class="fa fa-check"></i><b>2.5</b> Disconnecting</a></li>
<li class="chapter" data-level="2.6" data-path="installation.html"><a href="installation.html#recap"><i class="fa fa-check"></i><b>2.6</b> Recap</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="modeling.html"><a href="modeling.html"><i class="fa fa-check"></i><b>3</b> Modeling</a><ul>
<li class="chapter" data-level="3.1" data-path="modeling.html"><a href="modeling.html#overview"><i class="fa fa-check"></i><b>3.1</b> Overview</a></li>
<li class="chapter" data-level="3.2" data-path="modeling.html"><a href="modeling.html#pipelines"><i class="fa fa-check"></i><b>3.2</b> Pipelines</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="clusters.html"><a href="clusters.html"><i class="fa fa-check"></i><b>4</b> Clusters</a><ul>
<li class="chapter" data-level="4.1" data-path="clusters.html"><a href="clusters.html#overview-1"><i class="fa fa-check"></i><b>4.1</b> Overview</a></li>
<li class="chapter" data-level="4.2" data-path="clusters.html"><a href="clusters.html#managers"><i class="fa fa-check"></i><b>4.2</b> Managers</a><ul>
<li class="chapter" data-level="4.2.1" data-path="clusters.html"><a href="clusters.html#clusters-standalone"><i class="fa fa-check"></i><b>4.2.1</b> Standalone</a></li>
<li class="chapter" data-level="4.2.2" data-path="clusters.html"><a href="clusters.html#yarn"><i class="fa fa-check"></i><b>4.2.2</b> Yarn</a></li>
<li class="chapter" data-level="4.2.3" data-path="clusters.html"><a href="clusters.html#mesos"><i class="fa fa-check"></i><b>4.2.3</b> Mesos</a></li>
<li class="chapter" data-level="4.2.4" data-path="clusters.html"><a href="clusters.html#kubernetes"><i class="fa fa-check"></i><b>4.2.4</b> Kubernetes</a></li>
</ul></li>
<li class="chapter" data-level="4.3" data-path="clusters.html"><a href="clusters.html#on-premise"><i class="fa fa-check"></i><b>4.3</b> On-Premise</a><ul>
<li class="chapter" data-level="4.3.1" data-path="clusters.html"><a href="clusters.html#cloudera"><i class="fa fa-check"></i><b>4.3.1</b> Cloudera</a></li>
<li class="chapter" data-level="4.3.2" data-path="clusters.html"><a href="clusters.html#hortonworks"><i class="fa fa-check"></i><b>4.3.2</b> Hortonworks</a></li>
<li class="chapter" data-level="4.3.3" data-path="clusters.html"><a href="clusters.html#mapr"><i class="fa fa-check"></i><b>4.3.3</b> MapR</a></li>
</ul></li>
<li class="chapter" data-level="4.4" data-path="clusters.html"><a href="clusters.html#cloud"><i class="fa fa-check"></i><b>4.4</b> Cloud</a><ul>
<li class="chapter" data-level="4.4.1" data-path="clusters.html"><a href="clusters.html#amazon"><i class="fa fa-check"></i><b>4.4.1</b> Amazon</a></li>
<li class="chapter" data-level="4.4.2" data-path="clusters.html"><a href="clusters.html#google"><i class="fa fa-check"></i><b>4.4.2</b> Google</a></li>
<li class="chapter" data-level="4.4.3" data-path="clusters.html"><a href="clusters.html#microsoft"><i class="fa fa-check"></i><b>4.4.3</b> Microsoft</a></li>
</ul></li>
<li class="chapter" data-level="4.5" data-path="clusters.html"><a href="clusters.html#tools"><i class="fa fa-check"></i><b>4.5</b> Tools</a><ul>
<li class="chapter" data-level="4.5.1" data-path="clusters.html"><a href="clusters.html#rstudio"><i class="fa fa-check"></i><b>4.5.1</b> RStudio</a></li>
<li class="chapter" data-level="4.5.2" data-path="clusters.html"><a href="clusters.html#clusters-livy"><i class="fa fa-check"></i><b>4.5.2</b> Livy</a></li>
</ul></li>
<li class="chapter" data-level="4.6" data-path="clusters.html"><a href="clusters.html#recap-1"><i class="fa fa-check"></i><b>4.6</b> Recap</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="connections.html"><a href="connections.html"><i class="fa fa-check"></i><b>5</b> Connections</a><ul>
<li class="chapter" data-level="5.1" data-path="connections.html"><a href="connections.html#overview-2"><i class="fa fa-check"></i><b>5.1</b> Overview</a><ul>
<li class="chapter" data-level="5.1.1" data-path="connections.html"><a href="connections.html#edge-nodes"><i class="fa fa-check"></i><b>5.1.1</b> Edge Nodes</a></li>
<li class="chapter" data-level="5.1.2" data-path="connections.html"><a href="connections.html#spark-home"><i class="fa fa-check"></i><b>5.1.2</b> Spark Home</a></li>
</ul></li>
<li class="chapter" data-level="5.2" data-path="connections.html"><a href="connections.html#types"><i class="fa fa-check"></i><b>5.2</b> Types</a><ul>
<li class="chapter" data-level="5.2.1" data-path="connections.html"><a href="connections.html#local"><i class="fa fa-check"></i><b>5.2.1</b> Local</a></li>
<li class="chapter" data-level="5.2.2" data-path="connections.html"><a href="connections.html#standalone"><i class="fa fa-check"></i><b>5.2.2</b> Standalone</a></li>
<li class="chapter" data-level="5.2.3" data-path="connections.html"><a href="connections.html#yarn-1"><i class="fa fa-check"></i><b>5.2.3</b> Yarn</a></li>
<li class="chapter" data-level="5.2.4" data-path="connections.html"><a href="connections.html#livy"><i class="fa fa-check"></i><b>5.2.4</b> Livy</a></li>
<li class="chapter" data-level="5.2.5" data-path="connections.html"><a href="connections.html#mesos-1"><i class="fa fa-check"></i><b>5.2.5</b> Mesos</a></li>
<li class="chapter" data-level="5.2.6" data-path="connections.html"><a href="connections.html#kubernetes-1"><i class="fa fa-check"></i><b>5.2.6</b> Kubernetes</a></li>
</ul></li>
<li class="chapter" data-level="5.3" data-path="connections.html"><a href="connections.html#troubleshooting"><i class="fa fa-check"></i><b>5.3</b> Troubleshooting</a><ul>
<li class="chapter" data-level="5.3.1" data-path="connections.html"><a href="connections.html#logging"><i class="fa fa-check"></i><b>5.3.1</b> Logging</a></li>
<li class="chapter" data-level="5.3.2" data-path="connections.html"><a href="connections.html#troubleshoot-spark-submit"><i class="fa fa-check"></i><b>5.3.2</b> Spark Submit</a></li>
<li class="chapter" data-level="5.3.3" data-path="connections.html"><a href="connections.html#multiple"><i class="fa fa-check"></i><b>5.3.3</b> Multiple</a></li>
<li class="chapter" data-level="5.3.4" data-path="connections.html"><a href="connections.html#windows"><i class="fa fa-check"></i><b>5.3.4</b> Windows</a></li>
<li class="chapter" data-level="5.3.5" data-path="connections.html"><a href="connections.html#submit-manually"><i class="fa fa-check"></i><b>5.3.5</b> Submit Manually</a></li>
</ul></li>
<li class="chapter" data-level="5.4" data-path="connections.html"><a href="connections.html#recap-2"><i class="fa fa-check"></i><b>5.4</b> Recap</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="tuning.html"><a href="tuning.html"><i class="fa fa-check"></i><b>6</b> Tuning</a><ul>
<li class="chapter" data-level="6.1" data-path="tuning.html"><a href="tuning.html#overview-3"><i class="fa fa-check"></i><b>6.1</b> Overview</a></li>
<li class="chapter" data-level="6.2" data-path="tuning.html"><a href="tuning.html#configuration"><i class="fa fa-check"></i><b>6.2</b> Configuration</a></li>
<li class="chapter" data-level="6.3" data-path="tuning.html"><a href="tuning.html#caching"><i class="fa fa-check"></i><b>6.3</b> Caching</a></li>
<li class="chapter" data-level="6.4" data-path="tuning.html"><a href="tuning.html#partitions"><i class="fa fa-check"></i><b>6.4</b> Partitions</a></li>
<li class="chapter" data-level="6.5" data-path="tuning.html"><a href="tuning.html#shuffling"><i class="fa fa-check"></i><b>6.5</b> Shuffling</a></li>
<li class="chapter" data-level="6.6" data-path="tuning.html"><a href="tuning.html#checkpointing"><i class="fa fa-check"></i><b>6.6</b> Checkpointing</a></li>
<li class="chapter" data-level="6.7" data-path="tuning.html"><a href="tuning.html#troubleshooting-1"><i class="fa fa-check"></i><b>6.7</b> Troubleshooting</a><ul>
<li class="chapter" data-level="6.7.1" data-path="tuning.html"><a href="tuning.html#graph-visualization"><i class="fa fa-check"></i><b>6.7.1</b> Graph Visualization</a></li>
<li class="chapter" data-level="6.7.2" data-path="tuning.html"><a href="tuning.html#event-timeline"><i class="fa fa-check"></i><b>6.7.2</b> Event Timeline</a></li>
</ul></li>
<li class="chapter" data-level="6.8" data-path="tuning.html"><a href="tuning.html#recap-3"><i class="fa fa-check"></i><b>6.8</b> Recap</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="extensions.html"><a href="extensions.html"><i class="fa fa-check"></i><b>7</b> Extensions</a><ul>
<li class="chapter" data-level="7.1" data-path="extensions.html"><a href="extensions.html#using-extensions"><i class="fa fa-check"></i><b>7.1</b> Using Extensions</a><ul>
<li class="chapter" data-level="7.1.1" data-path="extensions.html"><a href="extensions.html#graphframes"><i class="fa fa-check"></i><b>7.1.1</b> GraphFrames</a></li>
<li class="chapter" data-level="7.1.2" data-path="extensions.html"><a href="extensions.html#mleap"><i class="fa fa-check"></i><b>7.1.2</b> Mleap</a></li>
<li class="chapter" data-level="7.1.3" data-path="extensions.html"><a href="extensions.html#h2o"><i class="fa fa-check"></i><b>7.1.3</b> H2O</a></li>
</ul></li>
<li class="chapter" data-level="7.2" data-path="extensions.html"><a href="extensions.html#writting-extensions"><i class="fa fa-check"></i><b>7.2</b> Writting Extensions</a><ul>
<li class="chapter" data-level="7.2.1" data-path="extensions.html"><a href="extensions.html#rstudio-projects"><i class="fa fa-check"></i><b>7.2.1</b> RStudio Projects</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="8" data-path="distributed.html"><a href="distributed.html"><i class="fa fa-check"></i><b>8</b> Distributed R</a><ul>
<li class="chapter" data-level="8.1" data-path="distributed.html"><a href="distributed.html#use-cases"><i class="fa fa-check"></i><b>8.1</b> Use Cases</a></li>
<li class="chapter" data-level="8.2" data-path="distributed.html"><a href="distributed.html#grouping"><i class="fa fa-check"></i><b>8.2</b> Grouping</a></li>
<li class="chapter" data-level="8.3" data-path="distributed.html"><a href="distributed.html#packages"><i class="fa fa-check"></i><b>8.3</b> Packages</a></li>
<li class="chapter" data-level="8.4" data-path="distributed.html"><a href="distributed.html#restrictions"><i class="fa fa-check"></i><b>8.4</b> Restrictions</a></li>
<li class="chapter" data-level="8.5" data-path="distributed.html"><a href="distributed.html#troubleshooting-2"><i class="fa fa-check"></i><b>8.5</b> Troubleshooting</a></li>
</ul></li>
<li class="chapter" data-level="9" data-path="streaming.html"><a href="streaming.html"><i class="fa fa-check"></i><b>9</b> Streaming</a><ul>
<li class="chapter" data-level="9.1" data-path="streaming.html"><a href="streaming.html#overview-4"><i class="fa fa-check"></i><b>9.1</b> Overview</a></li>
<li class="chapter" data-level="9.2" data-path="streaming.html"><a href="streaming.html#transformations"><i class="fa fa-check"></i><b>9.2</b> Transformations</a><ul>
<li class="chapter" data-level="9.2.1" data-path="streaming.html"><a href="streaming.html#streams-dplyr"><i class="fa fa-check"></i><b>9.2.1</b> dplyr</a></li>
<li class="chapter" data-level="9.2.2" data-path="streaming.html"><a href="streaming.html#streams-pipelines"><i class="fa fa-check"></i><b>9.2.2</b> Pipelines</a></li>
<li class="chapter" data-level="9.2.3" data-path="streaming.html"><a href="streaming.html#streams-r"><i class="fa fa-check"></i><b>9.2.3</b> R Code</a></li>
</ul></li>
<li class="chapter" data-level="9.3" data-path="streaming.html"><a href="streaming.html#shiny"><i class="fa fa-check"></i><b>9.3</b> Shiny</a></li>
</ul></li>
<li class="chapter" data-level="10" data-path="contributing.html"><a href="contributing.html"><i class="fa fa-check"></i><b>10</b> Contributing</a><ul>
<li class="chapter" data-level="10.1" data-path="contributing.html"><a href="contributing.html#overview-5"><i class="fa fa-check"></i><b>10.1</b> Overview</a></li>
<li class="chapter" data-level="10.2" data-path="contributing.html"><a href="contributing.html#serialization"><i class="fa fa-check"></i><b>10.2</b> Serialization</a></li>
<li class="chapter" data-level="10.3" data-path="contributing.html"><a href="contributing.html#invocations"><i class="fa fa-check"></i><b>10.3</b> Invocations</a></li>
<li class="chapter" data-level="10.4" data-path="contributing.html"><a href="contributing.html#r-packages"><i class="fa fa-check"></i><b>10.4</b> R Packages</a></li>
<li class="chapter" data-level="10.5" data-path="contributing.html"><a href="contributing.html#connections-1"><i class="fa fa-check"></i><b>10.5</b> Connections</a></li>
<li class="chapter" data-level="10.6" data-path="contributing.html"><a href="contributing.html#distributed-r"><i class="fa fa-check"></i><b>10.6</b> Distributed R</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="references.html"><a href="references.html"><i class="fa fa-check"></i>References</a></li>
<li class="chapter" data-level="" data-path="appendix.html"><a href="appendix.html"><i class="fa fa-check"></i>Appendix</a><ul>
<li class="chapter" data-level="10.7" data-path="appendix.html"><a href="appendix.html#storage-capacity"><i class="fa fa-check"></i><b>10.7</b> Worlds Store Capacity</a></li>
<li class="chapter" data-level="10.8" data-path="appendix.html"><a href="appendix.html#cran-downloads"><i class="fa fa-check"></i><b>10.8</b> Daily downloads of CRAN packages</a></li>
<li class="chapter" data-level="10.9" data-path="appendix.html"><a href="appendix.html#cluster-trends"><i class="fa fa-check"></i><b>10.9</b> Google trends for mainframes, cloud computing and kubernetes</a></li>
</ul></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">The R in Spark: Learning Apache Spark with R</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="installation" class="section level1">
<h1><span class="header-section-number">Chapter 2</span> Installation</h1>
<p>From R, installing and launching a local Spark cluster using <code>sparklyr</code> is as easy as running:</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb1-1" data-line-number="1"><span class="kw">spark_install</span>()</a>
<a class="sourceLine" id="cb1-2" data-line-number="2">sc &lt;-<span class="st"> </span><span class="kw">spark_connect</span>(<span class="dt">master =</span> <span class="st">&quot;local&quot;</span>)</a></code></pre></div>
<p>However, to make sure we can all run the code above and understand it, this chapter will walk you through installing the prerequisites, installing Spark and connecting to a local Spark cluster.</p>
<div id="prerequisites" class="section level2">
<h2><span class="header-section-number">2.1</span> Prerequisites</h2>
<p>As briefly mentioned in the <a href="intro.html#intro">Introduction</a> chapter, R is a programming language that can run in many platforms and environments. Most people making use of a programming language also choose tools to make them more productive in it; for R, RStudio would be such tool. Strictly speaking, RStudio is an Integrated Development Environment or IDE for short, which also happens to support many platforms and environments. R and RStudio are the free software tools this book will make use of and therefore, I strongly recommend you get those installed if you haven’t done so already.</p>
<p>Additionally, since Spark is build in the Scala programming language which is run by the Java Virtual Machine, you also need to install Java 7 or newer in your system. It is likely that your system already has Java installed, but is probably worth updating with the steps bellow.</p>
<div id="install-r" class="section level3">
<h3><span class="header-section-number">2.1.1</span> Install R</h3>
<p>From <a href="https://r-project.org/">r-project.org</a>, download and launch the installer for your platform, Windows, Macs or Linux available.</p>
<div class="figure" style="text-align: center"><span id="fig:r-download"></span>
<img src="images/02-getting-started-download-r.png" alt="The R Project for Statistical Computing." width="496" />
<p class="caption">
FIGURE 2.1: The R Project for Statistical Computing.
</p>
</div>
</div>
<div id="install-java" class="section level3">
<h3><span class="header-section-number">2.1.2</span> Install Java</h3>
<p>From <a href="http://www.oracle.com/technetwork/java/javase/downloads/jdk8-downloads-2133151.html">oracle.com/technetwork/java/javase/downloads/jdk8-downloads-2133151.html</a>, download and launch the installer for your platform, Windows, Macs or Linux available. While installing the JRE (Java Runtime Environment) is sufficient for most operations, in order to build extensions you will need the JDK (Java Developer Kit); therefore, I rather recommend installing the JDK in the first place.</p>
<div class="figure" style="text-align: center"><span id="fig:java-download"></span>
<img src="images/02-getting-started-jdk-8.png" alt="Java Download." width="496" />
<p class="caption">
FIGURE 2.2: Java Download.
</p>
</div>
<p>Starting with Spark 2.1, Java 8 is required; however, previous versions of Spark support Java 7. Regardless, we recommend installing Java 8 as described in this chapter</p>
</div>
<div id="install-rstudio" class="section level3">
<h3><span class="header-section-number">2.1.3</span> Install RStudio</h3>
<p>While installing RStudio is not strictly required to work with <code>sparklyr</code> in R, it will make you much more production and therefore, I highly recommend you take the time to install RStudio from <a href="https://www.rstudio.com/products/rstudio/download/">rstudio.com/products/rstudio/download/</a>, then download and launch the installer for your platform, Windows, Macs or Linux available.</p>
<div class="figure" style="text-align: center"><span id="fig:rstudio-download"></span>
<img src="images/02-getting-started-rstudio.png" alt="RStudio Downloads." width="496" />
<p class="caption">
FIGURE 2.3: RStudio Downloads.
</p>
</div>
<p>After launching RStudio, identify the Console panel since this is where most of the code will be executed in this book. For additional learning resources on R and RStudio consider visiting: <a href="https://www.rstudio.com/online-learning/">rstudio.com/online-learning/</a>.</p>
</div>
<div id="install-sparklyr" class="section level3">
<h3><span class="header-section-number">2.1.4</span> Install sparklyr</h3>
<p>First of all, we would want to install <code>sparkylr</code>. As many other R packages, <code>sparklyr</code> is available in <a href="https://CRAN.R-project.org/package=sparklyr">CRAN</a> and can be easily installed as follows:</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb2-1" data-line-number="1"><span class="kw">install.packages</span>(<span class="st">&quot;sparklyr&quot;</span>)</a></code></pre></div>
<p>The CRAN release of <code>sparklyr</code> contains the most stable version and it’s the recommended version to use; however, for those that need or might want to try newer features being developed in <code>sparklyr</code> you can install directly from GitHub using the <code>devtools</code> package. First install the <code>devtools</code> package and then <code>sparklyr</code> as follows:</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb3-1" data-line-number="1"><span class="kw">install.packages</span>(<span class="st">&quot;devtools&quot;</span>)</a>
<a class="sourceLine" id="cb3-2" data-line-number="2">devtools<span class="op">::</span><span class="kw">install_github</span>(<span class="st">&quot;rstudio/sparklyr&quot;</span>)</a></code></pre></div>
</div>
</div>
<div id="installing-spark" class="section level2">
<h2><span class="header-section-number">2.2</span> Installing Spark</h2>
<p>Start by loading <code>sparklyr</code>,</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb4-1" data-line-number="1"><span class="kw">library</span>(sparklyr)</a></code></pre></div>
<p>This will makes all <code>sparklyr</code> functions available in R, which is really helpful; otherwise, we would have to run each <code>sparklyr</code> command prefixed with <code>sparklyr::</code>.</p>
<p>As mentioned, Spark can be easily installed by running <code>spark_install()</code>; this will install the latest version of Spark locally in your computer, go ahead and run <code>spark_install()</code>. Notice that this command requires internet connectivity to download Spark.</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb5-1" data-line-number="1"><span class="kw">spark_install</span>()</a></code></pre></div>
<p>All the versions of Spark that are available for installation can be displayed with <code>spark_available_versions()</code>:</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb6-1" data-line-number="1"><span class="kw">spark_available_versions</span>()</a></code></pre></div>
<pre><code>##    spark
## 1  1.6.3
## 2  1.6.2
## 3  1.6.1
## 4  1.6.0
## 5  2.0.0
## 6  2.0.1
## 7  2.0.2
## 8  2.1.0
## 9  2.1.1
## 10 2.2.0
## 11 2.2.1
## 12 2.3.0</code></pre>
<p>A specific version can be installed using the Spark version and, optionally, by also specifying the Hadoop version. For instance, to install Spark 1.6.3, we would run <code>spark_install(&quot;1.6.3&quot;)</code>.</p>
<p>You can also check which versions are installed by running:</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb8-1" data-line-number="1"><span class="kw">spark_installed_versions</span>()</a></code></pre></div>
<p>Finally, in order to uninstall an specific version of Spark you can run <code>spark_uninstall()</code> by specifying the Spark and Hadoop versions, for instance:</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb9-1" data-line-number="1"><span class="kw">spark_uninstall</span>(<span class="dt">version =</span> <span class="st">&quot;1.6.0&quot;</span>, <span class="dt">hadoop =</span> <span class="st">&quot;2.6&quot;</span>)</a></code></pre></div>
</div>
<div id="connecting-to-spark" class="section level2">
<h2><span class="header-section-number">2.3</span> Connecting to Spark</h2>
<p>It’s important to mention that, so far, we’ve only installed a local Spark cluster. A local cluster is really helpful to get started, test code and troubleshoot with ease; further chapters will explain where to find, install and connect to real Spark clusters with many machines; but for the first few chapters, we will focus on using local clusters.</p>
<p>Threfore, to connect to this local cluster we simple run:</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb10-1" data-line-number="1">sc &lt;-<span class="st"> </span><span class="kw">spark_connect</span>(<span class="dt">master =</span> <span class="st">&quot;local&quot;</span>)</a></code></pre></div>
<p>The <code>master</code> parameter helps <code>sparklyr</code> find which is the “main” machine from the Spark cluster, this machine is often call the driver node. While working with real clusters using many machines, most machines will be worker machines and one will be the master. Since we only have a local cluster with only one machine, we will default to use <code>&quot;local&quot;</code> for now.</p>
</div>
<div id="using-spark" class="section level2">
<h2><span class="header-section-number">2.4</span> Using Spark</h2>
<p>Now that you are connected, we can run a simple commands. For instance, let’s start by loading some text.</p>
<p>First, lets create a text file by running:</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb11-1" data-line-number="1"><span class="kw">write</span>(<span class="st">&quot;Hello World!&quot;</span>, <span class="st">&quot;hello.txt&quot;</span>)</a></code></pre></div>
<p>Which we can read back in Spark by running:</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb12-1" data-line-number="1"><span class="kw">spark_read_text</span>(sc, <span class="st">&quot;hello&quot;</span>, <span class="st">&quot;hello.txt&quot;</span>)</a></code></pre></div>
<pre><code>## # Source:   table&lt;hello&gt; [?? x 1]
## # Database: spark_connection
##   line        
##   &lt;chr&gt;       
## 1 Hello World!</code></pre>
<div id="spark-web-interface" class="section level3">
<h3><span class="header-section-number">2.4.1</span> Web Interface</h3>
<p>Most of the Spark commands will get started from the R console; however, it is often the case that monitoring and analizing execution is done through Spark’s web interface. This interface is a web page provided by the driver node which can be accessed from <code>sparklyr</code> by running:</p>
<div class="sourceCode" id="cb14"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb14-1" data-line-number="1"><span class="kw">spark_web</span>(sc)</a></code></pre></div>
<div class="figure" style="text-align: center"><span id="fig:spark-web"></span>
<img src="images/02-getting-started-spark-web.png" alt="Apache Spark Web Interface." width="496" />
<p class="caption">
FIGURE 2.4: Apache Spark Web Interface.
</p>
</div>
</div>
<div id="logs" class="section level3">
<h3><span class="header-section-number">2.4.2</span> Logs</h3>
<p>Another common tool is to read through the Spark logs, a log is just a text file where Spark will append information relevant to the execution of tasks in the cluster. For local clusters, we can retrieve the <code>sparklyr</code> related log entries by running:</p>
<div class="sourceCode" id="cb15"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb15-1" data-line-number="1"><span class="kw">spark_log</span>(sc, <span class="dt">filter =</span> <span class="st">&quot;sparklyr&quot;</span>, <span class="dt">n =</span> <span class="dv">5</span>)</a></code></pre></div>
<pre><code>## 18/07/10 22:45:39 INFO SparkContext: Submitted application: sparklyr
## 18/07/10 22:45:40 INFO SparkContext: Added JAR file:/Library/Frameworks/R.framework/Versions/3.5/Resources/library/sparklyr/java/sparklyr-2.3-2.11.jar at spark://localhost:54225/jars/sparklyr-2.3-2.11.jar with timestamp 1531287940138
## 18/07/10 22:45:43 INFO Executor: Fetching spark://localhost:54225/jars/sparklyr-2.3-2.11.jar with timestamp 1531287940138
## 18/07/10 22:45:43 INFO Utils: Fetching spark://localhost:54225/jars/sparklyr-2.3-2.11.jar to /private/var/folders/fz/v6wfsg2x1fb1rw4f6r0x4jwm0000gn/T/spark-755c7f29-5246-4fd6-aeaf-4149b00f82c0/userFiles-07878093-d9ac-42cf-b304-3063b86c0810/fetchFileTemp7096207025830779601.tmp
## 18/07/10 22:45:43 INFO Executor: Adding file:/private/var/folders/fz/v6wfsg2x1fb1rw4f6r0x4jwm0000gn/T/spark-755c7f29-5246-4fd6-aeaf-4149b00f82c0/userFiles-07878093-d9ac-42cf-b304-3063b86c0810/sparklyr-2.3-2.11.jar to class loader</code></pre>
</div>
<div id="using-spark-from-rstudio" class="section level3">
<h3><span class="header-section-number">2.4.3</span> RStudio</h3>
<p><strong>TODO:</strong> Explain and show a couple integration points for those using <code>sparklyr</code> from RStudio.</p>
</div>
</div>
<div id="disconnecting" class="section level2">
<h2><span class="header-section-number">2.5</span> Disconnecting</h2>
<p>For local clusters and, really, any cluster; once you are done processing data you should disconnect by running:</p>
<div class="sourceCode" id="cb17"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb17-1" data-line-number="1"><span class="kw">spark_disconnect</span>(sc)</a></code></pre></div>
<p>this will terminate the connection to the cluster but also terminate the cluster tasks as well. If multiple Spark connections are active, or if the conneciton instance <code>sc</code> is no longer available, you can also disconnect all your Spark connections by running <code>spark_disconnect_all()</code>.</p>
</div>
<div id="recap" class="section level2">
<h2><span class="header-section-number">2.6</span> Recap</h2>
<p>This chapter walked you through installing R, Java, RStudio and <code>sparklyr</code> as the main tools required to use Spark from R. We covered installing local Spark clusters using <code>spark_install()</code> and learned how to launch the web interface using <code>spark_web(sc)</code> and view logs using <code>spark_log(sc)</code>.</p>
<p>It is my hope that this chapter will help anyone interested in learning cluster computing using Spark and R to get you started, ready to experiment on your own and ready to tackle actual data analysis and modeling tasks without any makor blockers. However, if you hit any installation or connection issues, start by browsing online for the error message or open a GitHub issue under <a href="https://github.com/rstudio/sparklyr/issues" class="uri">https://github.com/rstudio/sparklyr/issues</a> to help you get going.</p>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="intro.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="modeling.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": true,
"facebook": false,
"twitter": true,
"google": false,
"linkedin": false,
"weibo": false,
"instapper": false,
"vk": false,
"all": ["facebook", "google", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/javierluraschi/the-r-in-spark/edit/master/02-installation.Rmd",
"text": "Edit"
},
"download": ["the-r-in-spark.pdf", "the-r-in-spark.epub"],
"toc": {
"collapse": "subsection"
}
});
});
</script>

</body>

</html>
